<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="../static/js/bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="../static/js/layout/layout-default-latest.css" rel="stylesheet">
<link rel="stylesheet" href="../static/js/select2/select2.css">
<link rel="stylesheet" href="../static/js/datepicker/css/datepicker.css">
<link rel="stylesheet" href="../static/js/datepicker2/css/bootstrap-datetimepicker.min.css">
<link rel="stylesheet" href="../static/js/chart/morris.css">
<script src="../static/js/jquery-1.8.3.min.js"></script>
<script src="../static/js/jquery.dataTables.min.js"></script>
<script src="../static/js/bootstrap/js/bootstrap.js"></script>
<script src="../static/js/layout/jquery-ui-latest.js"></script>
<script src="../static/js/layout/jquery.layout-latest.js"></script>
<script src="../static/js/my-common.js"></script>
<script src="../static/js/select2/select2.min.js"></script>
<script src="../static/js/datepicker/js/bootstrap-datepicker.js"></script>
<script src="../static/js/datepicker/js/locales/bootstrap-datepicker.zh-CN.js"></script>
<script src="../static/js/datepicker2/js/bootstrap-datetimepicker.min.js"></script>
<script src="../static/js/datepicker2/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="../static/js/chart/raphael-min.js"></script>
<script src="../static/js/chart/morris.min.js"></script>
<title>Insert title here</title>

<style type="text/css">
.comments{
border:1px solid #666666;
width:100%;
height:100%;
}
</style>

</head>
<body>
	<div class="ui-layout-center">
		<div class="tabs-custom">
			<ul class="nav nav-tabs">
				<li class="active">
					<a data-toggle="tab" href="#javaLogCheck">JAVA日志查看</a>
				</li>
				<li class="">
					<a data-toggle="tab" href="#javaLogSerch">JAVA日志搜索</a>
				</li>
				<li class="">
					<a data-toggle="tab" href="#javaLogDownload">JAVA日志下载</a>
				</li>
				<li class="">
					<a data-toggle="tab" href="#javaCmd">JAVA命令执行</a>
				</li>
			</ul>
		</div>
		<div class="tab-content">
		
		
			<div id="javaLogCheck" class="tab-pane active">
				<div class="well">
					<form id="javaLogCheckForm" enctype="multipart/form-data" class="form-inline">
						<select id="s1" class="span3" list="agentList" headerKey="-1" headerValue="请选择平台" listKey="id" listValue="agent" name="agentList">
						{% for agent in AllInfo['allagents'] %}
						<option value={{ agent }}>{{ agent }}</option>
						{% endfor %}
						</select>
						<select id="s2" class="span3" list="logsList" headerKey="-1" headerValue="请选择日志" listKey="id" listValue="logs" name="logsList">
						{% for javalogpath in AllInfo['javalogpaths'] %}
						<option value={{ javalogpath }}>{{ javalogpath }}</option>
						{% endfor %}
						</select>
						<input type="text" style="height:30px" class="input-medium"  placeholder="请选择时间" id="datepicker" name="checkTime">
						<input type="text" style="height:30px" class="input-medium" placeholder="输入查看区服" name="checkzone">
						<input type="text" style="height:30px" class="input-medium" placeholder="输入查看条数" name="checknum">
					</form>
					<button id="javaLogCheckBtn" style="margin-left:180px;" class="btn btn-primary">确定</button>
					<button id="addjavalogpathBtn" class="btn btn-primary">添加日志路径</button>
				</div>
				<div class="modal hide fade" id="myModal"></div>
				<div id="javaLogCheckMsg"></div>
			</div>
			
			
			<div id="javaLogSerch" class="tab-pane fade">
				<div class="well">
					<form id="javaLogSearchForm" enctype="multipart/form-data" class="form-inline">
						<select id="s3" class="span3" list="agentList" headerKey="-1" headerValue="请选择平台" listKey="id" listValue="agent" name="agentList">
						{% for agent in AllInfo['allagents'] %}
						<option value={{ agent }}>{{ agent }}</option>
						{% endfor %}
						</select>
						<select id="s4" class="span3" list="logsList" headerKey="-1" headerValue="请选择日志" listKey="id" listValue="logs" name="logsList">
						{% for javalogpath in AllInfo['javalogpaths'] %}
						<option value={{ javalogpath }}>{{ javalogpath }}</option>
						{% endfor %}
						</select>
						<input type="text" style="height:30px" class="input-medium"  placeholder="请选择时间" id="Searchdatepicker" name="checkTime">
						<input type="text" style="height:30px" class="input-medium" placeholder="输入时间段" name="timeZone">
						<input type="text" style="height:30px" class="input-medium" placeholder="输入查看区服" name="checkzone">
						<input type="text" style="height:30px" class="input-medium" placeholder="输入关键字" name="Key">
					</form>
					<button id="javaLogSearchBtn" style="margin-left:180px;" class="btn btn-primary">确定</button>
				</div>
				<div id="javaLogSearchMsg"></div>
			</div>
			
			
			
			
			<div id="javaLogDownload" class="tab-pane fade">
				<div class="well">
					<form id="javaLogDownForm" enctype="multipart/form-data" class="form-inline">
						<select id="s5" class="span3" list="agentList" headerKey="-1" headerValue="请选择平台" listKey="id" listValue="agent" name="agentList">
						{% for agent in AllInfo['allagents'] %}
						<option value={{ agent }}>{{ agent }}</option>
						{% endfor %}
						</select>
						<select id="s6" class="span3" list="logsList" headerKey="-1" headerValue="请选择日志" listKey="id" listValue="logs" name="logsList">
						{% for javalogpath in AllInfo['javalogpaths'] %}
						<option value={{ javalogpath }}>{{ javalogpath }}</option>
						{% endfor %}
						</select>
						<input type="text" style="height:30px" class="input-medium"  placeholder="请选择时间" id="Downdatepicker" name="checkTime">
						<input type="text" style="height:30px" class="input-medium" placeholder="输入时间段" name="timeZone">
						<input type="text" style="height:30px" class="input-medium" placeholder="输入查看区服" name="checkzone">
					</form>
					<button id="javaLogDownBtn" style="margin-left:180px;" class="btn btn-primary">确定</button>
				</div>
				<div id="javaLogDownMsg"></div>
			</div>
			
			<div id="javaCmd" class="tab-pane fade">
				<div class="well">
					<form id="javaCmdForm" enctype="multipart/form-data" class="form-inline">
						<select id="s7" class="span3" list="agentList" headerKey="-1" headerValue="请选择平台" listKey="id" listValue="agent" name="agentList">
						{% for agent in AllInfo['allagents'] %}
						<option value={{ agent }}>{{ agent }}</option>
						{% endfor %}
						</select>
						<select id="s8" class="span3" list="cmdList" headerKey="-1" headerValue="请选择命令" listKey="id" listValue="logs" name="cmdList">
						<option></option>
						{% for javacmd in AllInfo['javacmds'] %}
						<option value="{{ javacmd }}">{{ javacmd }}</option>
						{% endfor %}
						</select>
						<input type="text" style="height:30px" class="input-medium" placeholder="输入查看区服" name="checkzone">
						<input type="text" style="height:30px" class="input-medium" placeholder="JAVAPID" name="javapid" id="javapid">
					</form>
					<button id="javaCmdBtn" style="margin-left:180px;" class="btn btn-primary">确定</button>
				</div>
				<div id="javaCmdMsg"></div>
			</div>
			
			
		</div>
	</div>
</body>
<script>
	$(document).ready(function(){
		$('#s8').change(function(){
			var p1=$(this).children('option:selected').val();
			if(p1=="jps -l"){
				$('#javapid').attr("readonly","true");
			}else{
				$('#javapid').removeAttr("readonly");
			
			};
		});
	});


	$('#datepicker').datetimepicker({
		format :'yyyy-mm-dd hh:00:00',
	    language:  'zh-CN',
	    weekStart: 1,
	    todayBtn:  1,
		autoclose: 1,
		todayHighlight: 1,
		startView: 2,
		minView: 1,
		maxView: 2,
		forceParse: 0
    });
	$('#Searchdatepicker').datepicker({
        language: "zh-CN",
        autoclose: true,
        todayBtn: "linked"
    });
	
	$('#Downdatepicker').datepicker({
        language: "zh-CN",
        autoclose: true,
        todayBtn: "linked"
    });
	
	$(document).ready(function() { $("#s1").select2(); });
	$(document).ready(function() { $("#s2").select2(); });
	$(document).ready(function() { $("#s3").select2(); });
	$(document).ready(function() { $("#s4").select2(); });
	$(document).ready(function() { $("#s5").select2(); });
	$(document).ready(function() { $("#s6").select2(); });
	$(document).ready(function() { $("#s7").select2(); });
	$(document).ready(function() { $("#s8").select2(); });
	
	$("#javaLogCheckBtn").click(function(){
		$.post("javaChecklogSubmit",$("#javaLogCheckForm").serialize(),function(data){
			$("#javaLogCheckMsg").empty().html("<textarea class='comments'>"+data.result+"</textarea>");
		});
	
	});
	
	$("#javaLogSearchBtn").click(function(){
		$.post("javaSearchlogSubmit",$("#javaLogSearchForm").serialize(),function(data){
			$("#javaLogSearchMsg").empty().html("<textarea class='comments'>"+data.result+"</textarea>");
		});
	
	});
	
	$("#javaLogDownBtn").click(function(){
		$.post("javaDownlogSubmit",$("#javaLogDownForm").serialize(),function(data){
			if(data.code=="1"){
				$("#javaLogDownMsg").empty().html('<div class="alert alert-error">'+data.result+'打包文件失败</div>');
			}else{
				$("#javaLogDownMsg").empty().html('<a href='+data.result+'>点击下载</a>');
			};
		});
	
	});
	
	$("#javaCmdBtn").click(function(){
		$.post("javaCmdSubmit",$("#javaCmdForm").serialize(),function(data){
			$("#javaCmdMsg").empty().html("<textarea class='comments'>"+data.result+"</textarea>");
		});
	
	});
	
	$("#addjavalogpathBtn").click(function() {
		$.get("/addjavalogpath", function(data) {
			$("#myModal").html(data);
			$('#myModal').modal({
				backdrop : 'static'
			});
		});
	});
</script>

</html>
